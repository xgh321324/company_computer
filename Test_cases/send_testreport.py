#coding:utf-8import smtplibfrom email.mime.text import MIMETextfrom email.header import Headerfrom datetime import datetimeimport os,time#找出文件：reportdir = 'C://app//pycharm//REPORT'files = os.listdir(reportdir)print(files)'''L=[]for x in files:    a=(x.split(' '))[1]    L.append(a)print('L:',L)'''new_times=[]   #创建空列表for i in files:    b=os.path.getmtime(reportdir+'//'+i)  #单个文件的时间    new_times.append(b)   #将每个时间加入列表print(new_times)          #先打印出所有文件的时间for x in files:    if os.path.getmtime(reportdir+'//'+x)==max(new_times):   #如果这个文件的时间是时间列表中最大的，那么打印出这个文件        print('最新的文件为:%s' % x)lastdir = reportdir+'//'+xprint('最新的报告的路劲是：%s' % lastdir)with open(lastdir,'rb') as f:    R=f.read()#发送者sender = '15651797525@163.com'username = '15651797525@163.com'password = 'xgh3213242016'#接受者receiver = '970185127@qq.com'receiver2 = '1584570900@qq.com'server = 'smtp.163.com'subject = '这是今天的测试报告，请查收！'msg = MIMEText(R,'html','utf-8')   #html和utf-8容易忘了加引号，这里要注意msg['subject'] = Header(subject)msg['From:'] = '15651797525@163.com'msg['To:'] = receiver#上面这一部分好像必须是这个格式，不然会报错吧smtp = smtplib.SMTP(server,25)smtp.connect('smtp.163.com')smtp.login(username,password)smtp.sendmail(sender,[receiver,receiver2],msg.as_string())smtp.quit()